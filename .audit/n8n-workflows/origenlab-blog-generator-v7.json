{
  "name": "OrigenLab - Blog Generator v7.0 (Seguridad Privada PRO)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "days",
              "triggerAtHour": 9,
              "daysInterval": 2
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [480, 300],
      "id": "schedule-trigger",
      "name": "Cada 2 DÃ­as 9AM"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [480, 480],
      "id": "manual-trigger",
      "name": "EjecuciÃ³n Manual"
    },
    {
      "parameters": {
        "jsCode": "// =====================================================\n// ORIGENLAB BLOG GENERATOR v7.0 - SEGURIDAD PRIVADA PRO\n// Base de datos completa de empresas verificadas\n// =====================================================\n\nconst empresas = [\n  {\n    id: 'origins-private-security',\n    nombre: 'ORIGINS Private Security',\n    slugPerfil: 'seguridad-condominios-cdmx',\n    especialidad: 'Seguridad para Condominios',\n    ubicacion: 'CDMX y Estado de MÃ©xico',\n    direccion: 'Basiliso Romo Anguiano No 22 int 3, Col Industrial, CDMX 07800',\n    telefono: '+52-55-3025-5580',\n    email: 'josecruz@originsecurity.mx',\n    website: 'seguridad-privada.com.mx',\n    experiencia: '15+ aÃ±os',\n    rating: 4.9,\n    resenas: 245,\n    servicios: [\n      'Guardias certificados SSC',\n      'Central de monitoreo propio 24/7',\n      'TecnologÃ­a GPS en tiempo real',\n      'Respuesta en menos de 3 minutos',\n      'Control de accesos vehicular y peatonal',\n      'Rondines con reporte fotogrÃ¡fico',\n      'Escoltas ejecutivos'\n    ],\n    diferenciadores: [\n      'Ãšnica empresa con respuesta garantizada en 3 minutos',\n      'Guardias 100% certificados por SSC',\n      'Central de monitoreo propia (no tercerizada)',\n      'TecnologÃ­a GPS para rastreo de rondines'\n    ],\n    certificaciones: ['SSC', 'NOM-001', 'ISO 9001'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico', 'QuerÃ©taro'],\n    clientes: '500+ condominios protegidos'\n  },\n  {\n    id: 'seprico',\n    nombre: 'SEPRICO',\n    slugPerfil: 'seguridad-condominios-seprico',\n    especialidad: 'Seguridad Especializada para Condominios',\n    ubicacion: 'CDMX - Polanco',\n    direccion: 'Enrique Ibsen 40, Polanco III Secc, Miguel Hidalgo, CDMX 11550',\n    telefono: '+52-56-3628-2480',\n    email: 'direccion@seprico.mx',\n    website: 'seguridadprivadacondominios.com',\n    experiencia: '10+ aÃ±os',\n    rating: 4.8,\n    resenas: 428,\n    servicios: [\n      'Vigilancia 24/7 con guardias capacitados',\n      'Control de accesos biomÃ©trico',\n      'Monitoreo electrÃ³nico avanzado',\n      'CÃ¡maras de vigilancia HD',\n      'Sistemas de alarma perimetral',\n      'GestiÃ³n de visitantes digital',\n      'Rondines programados'\n    ],\n    diferenciadores: [\n      'EvaluaciÃ³n de seguridad gratuita',\n      'MÃ¡s de 200 condominios bajo protecciÃ³n',\n      'Control biomÃ©trico de Ãºltima generaciÃ³n',\n      'UbicaciÃ³n estratÃ©gica en Polanco'\n    ],\n    certificaciones: ['SSC', 'CONOCER'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico'],\n    clientes: '200+ condominios en Polanco y zonas premium'\n  },\n  {\n    id: 'seguridad-eventos-profesional',\n    nombre: 'Seguridad para Eventos',\n    slugPerfil: 'seguridad-eventos-profesional',\n    especialidad: 'Seguridad Integral para Eventos Masivos',\n    ubicacion: 'CDMX - Santa Fe',\n    direccion: 'Av. Javier Barros Sierra 540-Torre 1, Piso 3, Santa Fe, CDMX 01210',\n    telefono: '+52-55-1234-5600',\n    email: 'contacto@seguridadeventos.com',\n    website: 'seguridadeventos.com',\n    experiencia: '15+ aÃ±os',\n    rating: 4.9,\n    resenas: 615,\n    servicios: [\n      'Control de acceso para eventos',\n      'Vigilancia perimetral 24/7',\n      'Seguridad VIP y escoltas',\n      'GestiÃ³n de multitudes',\n      'CoordinaciÃ³n con autoridades',\n      'Planes de evacuaciÃ³n',\n      'Personal femenino especializado'\n    ],\n    diferenciadores: [\n      'MÃ¡s de 5,000 eventos realizados',\n      'Especialistas en conciertos y festivales',\n      'CoordinaciÃ³n directa con ProtecciÃ³n Civil',\n      'Equipo de respuesta rÃ¡pida'\n    ],\n    certificaciones: ['SSC', 'ProtecciÃ³n Civil', 'NOM-002'],\n    cobertura: ['Nacional'],\n    clientes: 'Auditorio Nacional, Foro Sol, Centro Banamex'\n  },\n  {\n    id: 'seguridadprivadamx',\n    nombre: 'SeguridadPrivadaMX',\n    slugPerfil: 'seguridad-condominios-inteligente',\n    especialidad: 'Seguridad Inteligente con TecnologÃ­a Propia',\n    ubicacion: 'CDMX - Benito JuÃ¡rez',\n    direccion: 'Av. Insurgentes Sur 1602, Piso 4, Col. CrÃ©dito Constructor, CDMX 03900',\n    telefono: '+52-55-1234-5678',\n    email: 'contacto@seguridadprivadamx.com',\n    website: 'seguridadprivadamx.com',\n    experiencia: '12+ aÃ±os',\n    rating: 4.9,\n    resenas: 312,\n    servicios: [\n      'App mÃ³vil para residentes',\n      'CÃ¡maras HD con acceso remoto',\n      'Control de accesos inteligente',\n      'Guardias 100% certificados SSC',\n      'Reportes en tiempo real',\n      'AutorizaciÃ³n de visitas digital',\n      'Precios transparentes sin costos ocultos'\n    ],\n    diferenciadores: [\n      'Primera empresa con tecnologÃ­a 100% propia',\n      'App mÃ³vil para control desde el celular',\n      'CotizaciÃ³n en menos de 4 horas',\n      'Precios transparentes publicados'\n    ],\n    certificaciones: ['SSC', 'ISO 27001', 'CONOCER'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico', 'Guadalajara'],\n    clientes: '150+ condominios con tecnologÃ­a integrada'\n  }\n];\n\n// Tipos de artÃ­culos profesionales\nconst tiposArticulo = [\n  {\n    tipo: 'resena-completa',\n    titulo: 'ReseÃ±a Completa',\n    descripcion: 'AnÃ¡lisis exhaustivo de la empresa, servicios, ventajas y experiencia de clientes',\n    enfoque: 'evaluativo'\n  },\n  {\n    tipo: 'guia-servicios',\n    titulo: 'GuÃ­a de Servicios',\n    descripcion: 'DescripciÃ³n detallada de todos los servicios que ofrece la empresa',\n    enfoque: 'informativo'\n  },\n  {\n    tipo: 'caso-exito',\n    titulo: 'Caso de Ã‰xito',\n    descripcion: 'Historia de cÃ³mo la empresa resolviÃ³ problemas reales de seguridad',\n    enfoque: 'narrativo'\n  },\n  {\n    tipo: 'comparativa',\n    titulo: 'Por QuÃ© Elegir',\n    descripcion: 'AnÃ¡lisis de ventajas competitivas frente al mercado',\n    enfoque: 'persuasivo'\n  }\n];\n\n// ImÃ¡genes disponibles organizadas por tema\nconst imagenes = {\n  condominios: [\n    'control-acceso-residencial-caseta.webp',\n    'guardia-caseta-entrada-residencial.webp',\n    'vigilante-fraccionamiento-residencial.webp',\n    'guardia-intramuros-residencial.webp',\n    'seguridad-perimetral-fraccionamiento.webp',\n    'patrulla-nocturna-fraccionamiento.webp',\n    'caseta-moderna-control-acceso.webp',\n    'guardia-acceso-condominio-pluma.webp',\n    'rondin-nocturno-residencial-casa.webp',\n    'vigilancia-acceso-controlado-pluma.webp'\n  ],\n  tecnologia: [\n    'monitoreo-camaras-vigilancia-24hrs.webp',\n    'central-monitoreo-seguridad-remota.webp',\n    'operador-monitoreo-alarmas-central.webp',\n    'operador-videovigilancia-monitores.webp',\n    'centro-comando-videovigilancia-gps.webp',\n    'centro-monitoreo-cctv-camaras.webp',\n    'monitoreo-gps-rastreo-vehicular.webp'\n  ],\n  eventos: [\n    'seguridad-eventos-alfombra-roja.webp',\n    'staff-seguridad-evento-corporativo.webp',\n    'vigilancia-eventos-sociales-gala.webp',\n    'equipo-seguridad-gala-convenciones.webp',\n    'personal-femenino-seguridad-eventos.webp',\n    'seguridad-congresos-exposiciones.webp'\n  ],\n  corporativo: [\n    'seguridad-corporativa-lobby-recepcion.webp',\n    'vigilancia-entrada-edificio-corporativo.webp',\n    'guardia-seguridad-torre-corporativa.webp',\n    'guardias-seguridad-corporativa-edificio.webp',\n    'vigilante-edificio-oficinas.webp',\n    'guardias-chaleco-tactico-empresarial.webp'\n  ],\n  ejecutivo: [\n    'escoltas-ejecutivos-empresariales.webp',\n    'escolta-ejecutivo-proteccion-vip.webp',\n    'proteccion-ejecutivos-traslados.webp',\n    'guardaespaldas-proteccion-personal.webp',\n    'seguridad-ejecutiva-guardaespaldas.webp',\n    'escoltas-vehiculo-blindado-cdmx.webp'\n  ],\n  industrial: [\n    'seguridad-industrial-bodega-almacen.webp',\n    'seguridad-parque-industrial-logistica.webp',\n    'control-acceso-parque-industrial.webp',\n    'vigilancia-nave-industrial-fabrica.webp',\n    'equipo-seguridad-zona-carga-industrial.webp',\n    'seguridad-almacen-logistica-bodega.webp'\n  ]\n};\n\n// Seleccionar empresa aleatoria\nconst empresa = empresas[Math.floor(Math.random() * empresas.length)];\nconst tipoArticulo = tiposArticulo[Math.floor(Math.random() * tiposArticulo.length)];\n\n// Seleccionar tema de imÃ¡genes segÃºn especialidad\nlet temaImagenes = 'condominios';\nif (empresa.especialidad.includes('Eventos')) temaImagenes = 'eventos';\nelse if (empresa.especialidad.includes('Inteligente')) temaImagenes = 'tecnologia';\n\nconst imagenesSeleccionadas = imagenes[temaImagenes].sort(() => Math.random() - 0.5).slice(0, 4);\n\n// Generar slug SEO sin nÃºmeros\nconst generarSlugSEO = (empresa, tipo) => {\n  const palabras = [\n    empresa.nombre.toLowerCase().replace(/[^a-z0-9\\s]/g, '').replace(/\\s+/g, '-'),\n    tipo.tipo,\n    empresa.especialidad.split(' ').slice(0, 2).join('-').toLowerCase().replace(/[^a-z\\-]/g, '')\n  ];\n  return palabras.join('-').substring(0, 80);\n};\n\nreturn {\n  empresa: empresa,\n  tipoArticulo: tipoArticulo,\n  slugArticulo: generarSlugSEO(empresa, tipoArticulo),\n  imagenPrincipal: imagenesSeleccionadas[0],\n  imagenesContenido: imagenesSeleccionadas.slice(1),\n  temaImagenes: temaImagenes,\n  fechaGeneracion: new Date().toISOString().split('T')[0]\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [720, 380],
      "id": "selector-empresa",
      "name": "Seleccionar Empresa y Contexto"
    },
    {
      "parameters": {
        "jsCode": "const d = $input.first().json;\nconst e = d.empresa;\nconst t = d.tipoArticulo;\n\nconst prompt = `Eres un redactor SEO experto en el sector de seguridad privada en MÃ©xico. Genera un artÃ­culo de blog PROFESIONAL, EXTENSO y OPTIMIZADO para SEO.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    DATOS DE LA EMPRESA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n**Nombre:** ${e.nombre}\n**Especialidad:** ${e.especialidad}\n**UbicaciÃ³n:** ${e.ubicacion}\n**DirecciÃ³n:** ${e.direccion}\n**Experiencia:** ${e.experiencia}\n**Rating:** ${e.rating}/5 (${e.resenas} reseÃ±as verificadas)\n**Website:** ${e.website}\n**TelÃ©fono:** ${e.telefono}\n\n**Servicios principales:**\n${e.servicios.map((s, i) => (i + 1) + '. ' + s).join('\\n')}\n\n**Diferenciadores clave:**\n${e.diferenciadores.map(d => 'â€¢ ' + d).join('\\n')}\n\n**Certificaciones:** ${e.certificaciones.join(', ')}\n**Cobertura geogrÃ¡fica:** ${e.cobertura.join(', ')}\n**Clientes destacados:** ${e.clientes}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    TIPO DE ARTÃCULO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n**Tipo:** ${t.titulo}\n**DescripciÃ³n:** ${t.descripcion}\n**Enfoque:** ${t.enfoque}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                 REQUISITOS SEO OBLIGATORIOS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. **TÃTULO (H1):** MÃ¡ximo 60 caracteres, incluir keyword principal \"seguridad privada\" + ubicaciÃ³n. SIN AÃ‘OS.\n\n2. **META DESCRIPTION:** Entre 150-160 caracteres exactos. Incluir:\n   - Keyword principal\n   - Beneficio claro\n   - Call to action implÃ­cito\n\n3. **KEYWORDS:** 8-10 keywords relevantes separadas por coma:\n   - seguridad privada MÃ©xico\n   - empresas de seguridad privada CDMX\n   - vigilancia 24/7\n   - guardias de seguridad certificados\n   - [keywords especÃ­ficas del servicio]\n\n4. **ESTRUCTURA DEL CONTENIDO:**\n   - IntroducciÃ³n impactante (150-200 palabras)\n   - MÃ­nimo 6 secciones con H2\n   - Cada secciÃ³n con 200-300 palabras mÃ­nimo\n   - SubtÃ­tulos H3 donde aplique\n   - Total: mÃ­nimo 2,000 palabras\n\n5. **DENSIDAD DE KEYWORDS:**\n   - Mencionar \"seguridad privada\" 8-12 veces naturalmente\n   - Mencionar \"MÃ©xico\" o \"CDMX\" 6-8 veces\n   - Usar variaciones semÃ¡nticas (vigilancia, protecciÃ³n, guardias)\n\n6. **INTERLINKING:**\n   - Link al perfil de empresa: <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"article-link\">${e.nombre}</a>\n   - Links a secciones relevantes dentro del artÃ­culo\n\n7. **ELEMENTOS ESPECIALES (incluir todos):**\n   - 2x <div class=\"article-tip\"><h4>Consejo Profesional</h4><p>...</p></div>\n   - 2x <div class=\"article-highlight\"><h4>Dato Importante</h4><p>...</p></div>\n   - 1x <blockquote class=\"article-quote\"><p>\"Testimonio de cliente...\"</p><cite>â€” Nombre, Cargo/UbicaciÃ³n</cite></blockquote>\n   - 1x lista de verificaciÃ³n con checkmarks\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    ESTRUCTURA HTML REQUERIDA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nEl contenido debe seguir esta estructura exacta:\n\n<p class=\"article-lead\">PÃ¡rrafo introductorio impactante que enganche al lector y presente el tema. Debe incluir la keyword principal y establecer la relevancia del contenido para el lector mexicano que busca servicios de seguridad privada.</p>\n\n<section class=\"article-section\" id=\"sobre-[empresa]\">\n  <h2>Sobre ${e.nombre}: Trayectoria y Experiencia en Seguridad Privada</h2>\n  <p>Contenido extenso sobre la historia, misiÃ³n y visiÃ³n de la empresa...</p>\n  <h3>Historia y FundaciÃ³n</h3>\n  <p>...</p>\n  <h3>Presencia en el Mercado Mexicano</h3>\n  <p>...</p>\n</section>\n\n<section class=\"article-section\" id=\"servicios-seguridad\">\n  <h2>Servicios de Seguridad Privada que Ofrece ${e.nombre}</h2>\n  <p>DescripciÃ³n detallada de cada servicio...</p>\n  <!-- Incluir imÃ¡genes con la clase: <figure class=\"article-image\"><img src=\"../img/seguridad-privada/[imagen].webp\" alt=\"[descripciÃ³n SEO]\" loading=\"lazy\"><figcaption>DescripciÃ³n de la imagen</figcaption></figure> -->\n</section>\n\n<section class=\"article-section\" id=\"tecnologia-seguridad\">\n  <h2>TecnologÃ­a y Equipamiento de Seguridad</h2>\n  <p>DescripciÃ³n de la tecnologÃ­a utilizada...</p>\n</section>\n\n<section class=\"article-section\" id=\"cobertura-zonas\">\n  <h2>Cobertura GeogrÃ¡fica y Zonas de Servicio en MÃ©xico</h2>\n  <p>Detalle de las zonas donde opera...</p>\n</section>\n\n<section class=\"article-section\" id=\"diferenciadores\">\n  <h2>Â¿Por QuÃ© Elegir ${e.nombre} para tu Seguridad?</h2>\n  <p>Ventajas competitivas y diferenciadores...</p>\n</section>\n\n<section class=\"article-section\" id=\"testimonios\">\n  <h2>Testimonios y Opiniones de Clientes</h2>\n  <p>Experiencias reales de clientes satisfechos...</p>\n</section>\n\n<section class=\"article-section\" id=\"como-contratar\">\n  <h2>CÃ³mo Contratar los Servicios de Seguridad Privada</h2>\n  <p>Proceso paso a paso para contratar...</p>\n</section>\n\n<section class=\"article-section\" id=\"preguntas-frecuentes\">\n  <h2>Preguntas Frecuentes sobre Seguridad Privada</h2>\n  <div class=\"faq-item\">\n    <h3>Â¿Pregunta 1?</h3>\n    <p>Respuesta detallada...</p>\n  </div>\n  <!-- MÃ­nimo 5 preguntas frecuentes -->\n</section>\n\n<section class=\"article-section\" id=\"conclusion\">\n  <h2>ConclusiÃ³n: Tu Seguridad en las Mejores Manos</h2>\n  <p>Resumen y llamado a la acciÃ³n...</p>\n</section>\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    FORMATO DE RESPUESTA JSON\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nResponde ÃšNICAMENTE con un JSON vÃ¡lido con esta estructura:\n\n{\n  \"titulo\": \"TÃ­tulo SEO optimizado (mÃ¡x 60 chars, sin aÃ±os)\",\n  \"tituloCorto\": \"Para breadcrumbs (mÃ¡x 25 chars)\",\n  \"metaDescripcion\": \"Meta description de exactamente 150-160 caracteres con keyword y CTA\",\n  \"keywords\": \"keyword1, keyword2, keyword3, keyword4, keyword5, keyword6, keyword7, keyword8\",\n  \"tiempoLectura\": 15,\n  \"subtitulo\": \"SubtÃ­tulo atractivo que complemente el H1\",\n  \"imagenAlt\": \"Texto alt SEO para la imagen principal\",\n  \"tocItems\": [\n    {\"id\": \"sobre-empresa\", \"titulo\": \"Sobre la Empresa\"},\n    {\"id\": \"servicios-seguridad\", \"titulo\": \"Servicios de Seguridad\"},\n    {\"id\": \"tecnologia-seguridad\", \"titulo\": \"TecnologÃ­a\"},\n    {\"id\": \"cobertura-zonas\", \"titulo\": \"Cobertura\"},\n    {\"id\": \"diferenciadores\", \"titulo\": \"Por QuÃ© Elegir\"},\n    {\"id\": \"testimonios\", \"titulo\": \"Testimonios\"},\n    {\"id\": \"como-contratar\", \"titulo\": \"CÃ³mo Contratar\"},\n    {\"id\": \"preguntas-frecuentes\", \"titulo\": \"FAQ\"},\n    {\"id\": \"conclusion\", \"titulo\": \"ConclusiÃ³n\"}\n  ],\n  \"contenido\": \"<p class='article-lead'>...</p><section class='article-section' id='...'>...</section>...\"\n}\n\nIMPORTANTE:\n- El contenido debe ser EXTENSO (mÃ­nimo 2,000 palabras)\n- Tono profesional, corporativo pero accesible\n- Datos especÃ­ficos y verificables de la empresa\n- Contenido original, no genÃ©rico\n- Optimizado para conversiÃ³n (leads)\n- Sin aÃ±os en tÃ­tulos ni contenido`;\n\nreturn {\n  prompt: prompt,\n  ...d\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [940, 380],
      "id": "constructor-prompt",
      "name": "Construir Prompt SEO Profesional"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [{"name": "Content-Type", "value": "application/json"}]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"gpt-4o\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Eres un redactor SEO senior especializado en el sector de seguridad privada en MÃ©xico. Tienes 15 aÃ±os de experiencia escribiendo contenido B2B de alta conversiÃ³n. Tu especialidad es crear artÃ­culos extensos, profesionales y completamente optimizados para SEO que posicionan en los primeros resultados de Google. Conoces profundamente el mercado mexicano de seguridad privada, las certificaciones SSC, las normativas y el lenguaje corporativo del sector. Siempre escribes contenido original, detallado y con datos especÃ­ficos. Responde ÃšNICAMENTE en formato JSON vÃ¡lido.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": {{ JSON.stringify($json.prompt) }}\n    }\n  ],\n  \"temperature\": 0.7,\n  \"max_tokens\": 8000,\n  \"response_format\": {\"type\": \"json_object\"}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1160, 380],
      "id": "openai-request",
      "name": "OpenAI GPT-4o (8K tokens)",
      "credentials": {
        "openAiApi": {"id": "YOUR_OPENAI_CREDENTIAL_ID", "name": "OpenAI API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst datos = $('Construir Prompt SEO Profesional').first().json;\n\ntry {\n  const articulo = JSON.parse(response.choices[0].message.content);\n  \n  // Validar campos requeridos\n  if (!articulo.titulo || !articulo.contenido || !articulo.metaDescripcion) {\n    throw new Error('Campos requeridos faltantes en la respuesta');\n  }\n\n  // Validar longitud del contenido (mÃ­nimo 1500 caracteres)\n  if (articulo.contenido.length < 1500) {\n    throw new Error('Contenido demasiado corto: ' + articulo.contenido.length + ' chars');\n  }\n\n  // Validar meta description\n  if (articulo.metaDescripcion.length < 140 || articulo.metaDescripcion.length > 165) {\n    console.log('Advertencia: Meta description fuera de rango: ' + articulo.metaDescripcion.length);\n  }\n\n  return {\n    valido: true,\n    titulo: articulo.titulo.substring(0, 60),\n    tituloCorto: articulo.tituloCorto || articulo.titulo.substring(0, 25),\n    metaDescripcion: articulo.metaDescripcion.substring(0, 160),\n    keywords: articulo.keywords,\n    tiempoLectura: articulo.tiempoLectura || 12,\n    subtitulo: articulo.subtitulo,\n    imagenAlt: articulo.imagenAlt || datos.empresa.nombre + ' - Seguridad Privada MÃ©xico',\n    tocItems: articulo.tocItems || [],\n    contenidoHTML: articulo.contenido,\n    contenidoLength: articulo.contenido.length,\n    \n    // Datos del contexto\n    slugArticulo: datos.slugArticulo,\n    empresa: datos.empresa,\n    tipoArticulo: datos.tipoArticulo,\n    imagenPrincipal: datos.imagenPrincipal,\n    imagenesContenido: datos.imagenesContenido,\n    fechaGeneracion: datos.fechaGeneracion\n  };\n} catch (e) {\n  return {\n    valido: false,\n    error: e.message,\n    rawResponse: response.choices?.[0]?.message?.content?.substring(0, 500)\n  };\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1380, 380],
      "id": "procesar-respuesta",
      "name": "Validar y Procesar Respuesta"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [{"value1": "={{ $json.valido }}", "value2": true}]
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1600, 380],
      "id": "verificar-valido",
      "name": "Â¿Contenido VÃ¡lido?"
    },
    {
      "parameters": {
        "jsCode": "const a = $input.first().json;\nconst e = a.empresa;\n\n// Construir TOC HTML\nconst tocHTML = a.tocItems.map(item => \n  `<li><a href=\"#${item.id}\">${item.titulo}</a></li>`\n).join('\\n              ');\n\n// Ruta de imagen\nconst imgPath = `img/seguridad-privada/${a.imagenPrincipal}`;\n\nconst html = `<!DOCTYPE html>\n<html lang=\"es-MX\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n  <!-- SEO Meta Tags Optimizados -->\n  <title>${a.titulo} | OrigenLab</title>\n  <meta name=\"description\" content=\"${a.metaDescripcion}\">\n  <meta name=\"keywords\" content=\"${a.keywords}\">\n  <meta name=\"author\" content=\"OrigenLab - Directorio B2B MÃ©xico\">\n  <meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large\">\n  <meta name=\"googlebot\" content=\"index, follow\">\n\n  <!-- Open Graph Optimizado -->\n  <meta property=\"og:type\" content=\"article\">\n  <meta property=\"og:url\" content=\"https://origenlab.com/blog/${a.slugArticulo}.html\">\n  <meta property=\"og:title\" content=\"${a.titulo}\">\n  <meta property=\"og:description\" content=\"${a.metaDescripcion}\">\n  <meta property=\"og:image\" content=\"https://origenlab.com/${imgPath}\">\n  <meta property=\"og:image:width\" content=\"1200\">\n  <meta property=\"og:image:height\" content=\"630\">\n  <meta property=\"og:locale\" content=\"es_MX\">\n  <meta property=\"og:site_name\" content=\"OrigenLab\">\n  <meta property=\"article:publisher\" content=\"https://origenlab.com\">\n  <meta property=\"article:section\" content=\"Seguridad Privada\">\n  <meta property=\"article:tag\" content=\"seguridad privada, empresas de seguridad, vigilancia MÃ©xico\">\n\n  <!-- Twitter Card -->\n  <meta name=\"twitter:card\" content=\"summary_large_image\">\n  <meta name=\"twitter:site\" content=\"@origenlab_mx\">\n  <meta name=\"twitter:creator\" content=\"@origenlab_mx\">\n  <meta name=\"twitter:title\" content=\"${a.titulo}\">\n  <meta name=\"twitter:description\" content=\"${a.metaDescripcion}\">\n  <meta name=\"twitter:image\" content=\"https://origenlab.com/${imgPath}\">\n\n  <!-- Canonical URL -->\n  <link rel=\"canonical\" href=\"https://origenlab.com/blog/${a.slugArticulo}.html\">\n\n  <!-- Fonts -->\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n\n  <!-- Stylesheets -->\n  <link rel=\"stylesheet\" href=\"../css/minimal-global.css\">\n  <link rel=\"stylesheet\" href=\"../css/style.css\">\n  <link rel=\"stylesheet\" href=\"../css/cta-global.css\">\n  <link rel=\"stylesheet\" href=\"assets/css/blog.css\">\n  <link rel=\"stylesheet\" href=\"assets/css/article.css\">\n\n  <!-- Schema.org Article Markup -->\n  <script type=\"application/ld+json\">\n  {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Article\",\n    \"mainEntityOfPage\": {\n      \"@type\": \"WebPage\",\n      \"@id\": \"https://origenlab.com/blog/${a.slugArticulo}.html\"\n    },\n    \"headline\": \"${a.titulo}\",\n    \"description\": \"${a.metaDescripcion}\",\n    \"image\": {\n      \"@type\": \"ImageObject\",\n      \"url\": \"https://origenlab.com/${imgPath}\",\n      \"width\": 1200,\n      \"height\": 630\n    },\n    \"author\": {\n      \"@type\": \"Organization\",\n      \"name\": \"OrigenLab\",\n      \"url\": \"https://origenlab.com\"\n    },\n    \"publisher\": {\n      \"@type\": \"Organization\",\n      \"name\": \"OrigenLab\",\n      \"logo\": {\n        \"@type\": \"ImageObject\",\n        \"url\": \"https://origenlab.com/img/origenlab.webp\"\n      }\n    },\n    \"datePublished\": \"${a.fechaGeneracion}\",\n    \"dateModified\": \"${a.fechaGeneracion}\",\n    \"inLanguage\": \"es-MX\",\n    \"articleSection\": \"Seguridad Privada\",\n    \"keywords\": \"${a.keywords}\",\n    \"about\": {\n      \"@type\": \"LocalBusiness\",\n      \"name\": \"${e.nombre}\",\n      \"description\": \"${e.especialidad}\",\n      \"telephone\": \"${e.telefono}\",\n      \"address\": {\n        \"@type\": \"PostalAddress\",\n        \"addressLocality\": \"${e.ubicacion}\",\n        \"addressCountry\": \"MX\"\n      }\n    }\n  }\n  </script>\n\n  <!-- FAQ Schema -->\n  <script type=\"application/ld+json\">\n  {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"FAQPage\",\n    \"mainEntity\": [\n      {\n        \"@type\": \"Question\",\n        \"name\": \"Â¿QuÃ© servicios de seguridad privada ofrece ${e.nombre}?\",\n        \"acceptedAnswer\": {\n          \"@type\": \"Answer\",\n          \"text\": \"${e.nombre} ofrece servicios de ${e.servicios.slice(0, 3).join(', ')}, entre otros servicios especializados de seguridad privada en MÃ©xico.\"\n        }\n      },\n      {\n        \"@type\": \"Question\",\n        \"name\": \"Â¿En quÃ© zonas opera ${e.nombre}?\",\n        \"acceptedAnswer\": {\n          \"@type\": \"Answer\",\n          \"text\": \"${e.nombre} tiene cobertura en ${e.cobertura.join(', ')}, brindando servicios de seguridad privada profesional.\"\n        }\n      }\n    ]\n  }\n  </script>\n</head>\n\n<body>\n\n  <!-- Header -->\n  <header class=\"header\">\n    <div class=\"container\">\n      <div class=\"nav-wrapper\">\n        <a href=\"../index.html\" class=\"logo\">\n          <img src=\"../img/origenlab.webp\" alt=\"OrigenLab - Directorio B2B MÃ©xico\" width=\"180\" height=\"40\">\n        </a>\n        <nav>\n          <a href=\"../categorias/categorias.html\" class=\"nav-link\">CategorÃ­as</a>\n          <a href=\"../blog.html\" class=\"nav-link active\">Blog</a>\n        </nav>\n      </div>\n    </div>\n  </header>\n\n  <!-- Breadcrumbs SEO -->\n  <div class=\"breadcrumbs-wrapper\">\n    <div class=\"container\">\n      <nav aria-label=\"Breadcrumb\" class=\"breadcrumbs\">\n        <ol itemscope itemtype=\"https://schema.org/BreadcrumbList\">\n          <li itemprop=\"itemListElement\" itemscope itemtype=\"https://schema.org/ListItem\">\n            <a itemprop=\"item\" href=\"../index.html\"><span itemprop=\"name\">Inicio</span></a>\n            <meta itemprop=\"position\" content=\"1\" />\n          </li>\n          <li itemprop=\"itemListElement\" itemscope itemtype=\"https://schema.org/ListItem\">\n            <a itemprop=\"item\" href=\"../blog.html\"><span itemprop=\"name\">Blog</span></a>\n            <meta itemprop=\"position\" content=\"2\" />\n          </li>\n          <li itemprop=\"itemListElement\" itemscope itemtype=\"https://schema.org/ListItem\">\n            <a itemprop=\"item\" href=\"../categorias/seguridad-privada.html\"><span itemprop=\"name\">Seguridad Privada</span></a>\n            <meta itemprop=\"position\" content=\"3\" />\n          </li>\n          <li itemprop=\"itemListElement\" itemscope itemtype=\"https://schema.org/ListItem\">\n            <span itemprop=\"name\">${a.tituloCorto}</span>\n            <meta itemprop=\"position\" content=\"4\" />\n          </li>\n        </ol>\n      </nav>\n    </div>\n  </div>\n\n  <!-- Article -->\n  <article class=\"article-container\" itemscope itemtype=\"https://schema.org/Article\">\n    <meta itemprop=\"author\" content=\"OrigenLab\">\n    <meta itemprop=\"datePublished\" content=\"${a.fechaGeneracion}\">\n    <div class=\"container\" style=\"max-width: 1400px; padding: var(--space-xl) var(--space-md);\">\n\n      <!-- Article Header -->\n      <header class=\"article-header\">\n        <div class=\"article-header-image\">\n          <figure class=\"article-featured-image\">\n            <img itemprop=\"image\" src=\"../${imgPath}\" alt=\"${a.imagenAlt}\" loading=\"eager\" width=\"800\" height=\"450\">\n          </figure>\n        </div>\n        <div class=\"article-header-content\">\n          <div class=\"article-category-badge\">\n            <a href=\"../categorias/seguridad-privada.html\">Seguridad Privada</a>\n          </div>\n          <h1 class=\"article-title\" itemprop=\"headline\">${a.titulo}</h1>\n          <p class=\"article-subtitle\" itemprop=\"description\">${a.subtitulo}</p>\n          <div class=\"article-meta-info\">\n            <span class=\"article-reading-time\">â± ${a.tiempoLectura} min lectura</span>\n            <span class=\"article-date\">ğŸ“… ${a.fechaGeneracion}</span>\n          </div>\n        </div>\n      </header>\n\n      <!-- Article Layout -->\n      <div class=\"article-layout\">\n\n        <!-- Main Content -->\n        <div class=\"article-content\" itemprop=\"articleBody\">\n\n          <!-- Table of Contents -->\n          <nav class=\"article-toc\" aria-label=\"Tabla de contenidos\">\n            <h2>Contenido del ArtÃ­culo</h2>\n            <ol>\n              ${tocHTML}\n            </ol>\n          </nav>\n\n          <!-- Article Content -->\n          ${a.contenidoHTML}\n\n          <!-- CTA en ArtÃ­culo -->\n          <div class=\"article-cta\">\n            <h3>Â¿Necesitas Servicios de Seguridad Privada en MÃ©xico?</h3>\n            <p>Conoce a ${e.nombre} y otros proveedores verificados de seguridad privada en nuestro directorio B2B</p>\n            <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"btn-primary\">Ver Perfil de ${e.nombre}</a>\n          </div>\n\n        </div>\n\n        <!-- Sidebar -->\n        <aside class=\"article-sidebar\">\n\n          <!-- Empresa Destacada -->\n          <div class=\"sidebar-widget sidebar-empresa\">\n            <h3 class=\"sidebar-widget-title\">Empresa Destacada</h3>\n            <div class=\"empresa-card-mini\">\n              <h4>${e.nombre}</h4>\n              <div class=\"empresa-rating\">â­ ${e.rating}/5 (${e.resenas} reseÃ±as)</div>\n              <p>${e.especialidad}</p>\n              <ul class=\"empresa-servicios-mini\">\n                ${e.servicios.slice(0, 3).map(s => '<li>âœ“ ' + s + '</li>').join('\\n                ')}\n              </ul>\n              <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"btn-primary\" style=\"width: 100%; text-align: center;\">Ver Perfil Completo</a>\n            </div>\n          </div>\n\n          <!-- MÃ¡s Empresas -->\n          <div class=\"sidebar-widget\">\n            <h3 class=\"sidebar-widget-title\">MÃ¡s Empresas de Seguridad</h3>\n            <a href=\"../categorias/seguridad-privada.html\" class=\"btn-secondary\" style=\"width: 100%; text-align: center;\">Ver Todas las Empresas</a>\n          </div>\n\n          <!-- Newsletter -->\n          <div class=\"sidebar-widget sidebar-newsletter\">\n            <h3 class=\"sidebar-widget-title\">Newsletter Seguridad</h3>\n            <p class=\"newsletter-description\">Recibe guÃ­as y anÃ¡lisis del sector de seguridad privada en MÃ©xico</p>\n            <form class=\"newsletter-form\">\n              <input type=\"email\" placeholder=\"tu@email.com\" class=\"newsletter-input\" required>\n              <button type=\"submit\" class=\"newsletter-btn\">Suscribirme</button>\n            </form>\n            <p class=\"newsletter-privacy\">Sin spam. Cancela cuando quieras.</p>\n          </div>\n\n        </aside>\n\n      </div>\n\n    </div>\n  </article>\n\n  <!-- CTA Section -->\n  <section class=\"cta-section\">\n    <div class=\"container\" style=\"max-width: 800px;\">\n      <h2>Â¿Buscas Empresas de Seguridad Privada en MÃ©xico?</h2>\n      <p>Encuentra proveedores verificados con las mejores referencias y certificaciones del sector</p>\n      <div class=\"cta-botones\">\n        <a href=\"../categorias/seguridad-privada.html\" class=\"btn-primary\">Ver Empresas de Seguridad</a>\n        <a href=\"../blog.html\" class=\"btn-secondary\">MÃ¡s ArtÃ­culos</a>\n      </div>\n    </div>\n  </section>\n\n  <!-- Footer -->\n  <footer class=\"footer\" role=\"contentinfo\">\n    <div class=\"container\">\n      <div class=\"footer-main\">\n        <div class=\"footer-column footer-brand\">\n          <div class=\"footer-logo\">\n            <a href=\"../index.html\">\n              <img src=\"../img/origenlab.webp\" alt=\"OrigenLab\" width=\"160\" height=\"36\" style=\"object-fit: contain; filter: brightness(0) invert(1);\">\n            </a>\n          </div>\n          <p class=\"footer-tagline\">Donde los Negocios Mexicanos se Conectan</p>\n          <div class=\"footer-social\">\n            <a href=\"https://linkedin.com/company/origenlab\" target=\"_blank\" rel=\"noopener\" aria-label=\"LinkedIn\" class=\"social-link\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z\"/></svg>\n            </a>\n            <a href=\"https://twitter.com/origenlab_mx\" target=\"_blank\" rel=\"noopener\" aria-label=\"Twitter\" class=\"social-link\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z\"></path></svg>\n            </a>\n            <a href=\"https://facebook.com/origenlab\" target=\"_blank\" rel=\"noopener\" aria-label=\"Facebook\" class=\"social-link\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\"><path d=\"M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z\"></path></svg>\n            </a>\n          </div>\n        </div>\n        <div class=\"footer-column\">\n          <h3 class=\"footer-column-title\">CategorÃ­as</h3>\n          <ul class=\"footer-links\">\n            <li><a href=\"../categorias/eventos.html\">Eventos Corporativos</a></li>\n            <li><a href=\"../categorias/fiestas-infantiles.html\">Fiestas Infantiles</a></li>\n            <li><a href=\"../categorias/seguridad-privada.html\">Seguridad Privada</a></li>\n            <li><a href=\"../categorias/equipo-contra-incendios.html\">Equipo Contra Incendios</a></li>\n          </ul>\n        </div>\n        <div class=\"footer-column\">\n          <h3 class=\"footer-column-title\">Empresa</h3>\n          <ul class=\"footer-links\">\n            <li><a href=\"../index.html#por-que-origenlab\">Acerca de OrigenLab</a></li>\n            <li><a href=\"../index.html#registrar-empresa\">Contacto</a></li>\n            <li><a href=\"../blog.html\">Blog</a></li>\n            <li><a href=\"../index.html#recursos\">Trabaja con Nosotros</a></li>\n          </ul>\n        </div>\n        <div class=\"footer-column\">\n          <h3 class=\"footer-column-title\">Para Empresas</h3>\n          <ul class=\"footer-links\">\n            <li><a href=\"../index.html#registrar-empresa\">Registrar Empresa</a></li>\n            <li><a href=\"../index.html#planes-premium\">Planes Premium</a></li>\n            <li><a href=\"../index.html#recursos\">Soluciones B2B</a></li>\n            <li><a href=\"../index.html#recursos\">API Empresarial</a></li>\n          </ul>\n        </div>\n        <div class=\"footer-column\">\n          <h3 class=\"footer-column-title\">Recursos</h3>\n          <ul class=\"footer-links\">\n            <li><a href=\"../index.html#recursos\">Centro de Ayuda</a></li>\n            <li><a href=\"../index.html#por-que-origenlab\">GuÃ­as B2B</a></li>\n            <li><a href=\"../index.html#registrar-empresa\">Webinars</a></li>\n            <li><a href=\"../index.html#recursos\">Reportes</a></li>\n          </ul>\n        </div>\n        <div class=\"footer-column\">\n          <h3 class=\"footer-column-title\">Legal</h3>\n          <ul class=\"footer-links\">\n            <li><a href=\"../index.html#recursos\">Aviso de Privacidad</a></li>\n            <li><a href=\"../index.html#recursos\">TÃ©rminos y Condiciones</a></li>\n            <li><a href=\"../index.html#recursos\">PolÃ­tica de Cookies</a></li>\n            <li><a href=\"../index.html#recursos\">Cumplimiento</a></li>\n          </ul>\n        </div>\n      </div>\n      <div class=\"footer-bottom\">\n        <p class=\"footer-copyright\">Â© 2025 OrigenLab. Todos los derechos reservados. Hecho con â™¥ en MÃ©xico.</p>\n        <div class=\"footer-certifications\">\n          <span class=\"footer-cert\">ğŸ”’ SSL Seguro</span>\n          <span class=\"footer-cert\">âœ“ Datos Verificados SAT</span>\n          <span class=\"footer-cert\">ğŸ‡²ğŸ‡½ 100% Mexicano</span>\n        </div>\n      </div>\n    </div>\n  </footer>\n\n</body>\n</html>`;\n\nreturn {\n  htmlArticulo: html,\n  rutaArchivo: `blog/${a.slugArticulo}.html`,\n  titulo: a.titulo,\n  extractoBlog: a.metaDescripcion,\n  tiempoLectura: a.tiempoLectura,\n  slugArticulo: a.slugArticulo,\n  imagenPrincipal: a.imagenPrincipal,\n  empresaNombre: e.nombre,\n  empresaSlug: e.slugPerfil,\n  keywords: a.keywords,\n  contenidoLength: a.contenidoLength\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 280],
      "id": "construir-html",
      "name": "Construir HTML SEO Completo"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "create",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "={{ $json.rutaArchivo }}",
        "fileContent": "={{ $json.htmlArticulo }}",
        "commitMessage": "=feat(blog): ${$json.empresaNombre} - ${$json.titulo}",
        "additionalParameters": {"branch": "main"}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2060, 280],
      "id": "github-articulo",
      "name": "GitHub - Subir ArtÃ­culo",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "blog/data/articulos.json"
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2280, 280],
      "id": "github-get-json",
      "name": "GitHub - Obtener JSON",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const articulo = $('Construir HTML SEO Completo').first().json;\nconst githubFile = $input.first().json;\n\n// Decodificar JSON actual\nlet jsonData;\ntry {\n  const content = Buffer.from(githubFile.content.replace(/\\n/g, ''), 'base64').toString('utf-8');\n  jsonData = JSON.parse(content);\n} catch (e) {\n  jsonData = { version: '2.0', lastUpdated: new Date().toISOString(), articulos: [] };\n}\n\n// Crear nuevo artÃ­culo con estructura mejorada\nconst nuevoArticulo = {\n  id: articulo.slugArticulo,\n  titulo: articulo.titulo,\n  slug: articulo.slugArticulo,\n  categoria: 'seguridad-privada',\n  categoriaNombre: 'Seguridad Privada',\n  extracto: articulo.extractoBlog,\n  imagen: `img/seguridad-privada/${articulo.imagenPrincipal}`,\n  tiempoLectura: articulo.tiempoLectura,\n  destacado: false,\n  fecha: new Date().toISOString().split('T')[0],\n  n8n: true,\n  version: '7.0',\n  empresa: articulo.empresaNombre,\n  empresaSlug: articulo.empresaSlug,\n  keywords: articulo.keywords,\n  contenidoLength: articulo.contenidoLength\n};\n\n// Verificar si ya existe y actualizar o insertar\nconst existeIndex = jsonData.articulos.findIndex(a => a.id === nuevoArticulo.id);\nif (existeIndex >= 0) {\n  jsonData.articulos[existeIndex] = nuevoArticulo;\n} else {\n  jsonData.articulos.unshift(nuevoArticulo);\n}\n\njsonData.lastUpdated = new Date().toISOString();\njsonData.version = '2.0';\n\nreturn {\n  jsonActualizado: JSON.stringify(jsonData, null, 2),\n  sha: githubFile.sha,\n  articulo: articulo,\n  nuevoArticulo: nuevoArticulo,\n  totalArticulos: jsonData.articulos.length\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2500, 280],
      "id": "actualizar-json",
      "name": "Actualizar JSON ArtÃ­culos"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "blog/data/articulos.json",
        "fileContent": "={{ $json.jsonActualizado }}",
        "commitMessage": "=feat(blog): actualizar articulos.json - ${$json.articulo.empresaNombre}",
        "additionalParameters": {"branch": "main", "sha": "={{ $json.sha }}"}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2720, 280],
      "id": "github-update-json",
      "name": "GitHub - Actualizar JSON",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const datos = $('Actualizar JSON ArtÃ­culos').first().json;\nconst a = datos.articulo;\n\nreturn {\n  exito: true,\n  empresa: a.empresaNombre,\n  titulo: a.titulo,\n  urlArticulo: `https://origenlab.com/blog/${a.slugArticulo}.html`,\n  urlPerfil: `https://origenlab.com/categorias/seguridad-privada/${a.empresaSlug}.html`,\n  tiempoLectura: `${a.tiempoLectura} min`,\n  contenidoLength: `${a.contenidoLength} caracteres`,\n  totalArticulos: datos.totalArticulos,\n  keywords: a.keywords.split(',').slice(0, 5).join(', '),\n  mensaje: 'âœ… ArtÃ­culo SEO profesional publicado correctamente'\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2940, 280],
      "id": "resumen-final",
      "name": "Generar Resumen"
    },
    {
      "parameters": {
        "chatId": "={{$env.TELEGRAM_CHAT_ID || '772938445'}}",
        "text": "=ğŸš€ *ARTÃCULO SEO PUBLICADO*\n\nğŸ¢ *Empresa:* {{ $json.empresa }}\nğŸ“ *TÃ­tulo:* {{ $json.titulo }}\n\nğŸ“Š *MÃ©tricas:*\nâ€¢ Tiempo lectura: {{ $json.tiempoLectura }}\nâ€¢ Contenido: {{ $json.contenidoLength }}\nâ€¢ Total artÃ­culos: {{ $json.totalArticulos }}\n\nğŸ”‘ *Keywords:* {{ $json.keywords }}\n\nğŸ”— *Links:*\nâ€¢ [Ver ArtÃ­culo]({{ $json.urlArticulo }})\nâ€¢ [Ver Perfil]({{ $json.urlPerfil }})\n\nâœ… {{ $json.mensaje }}\n\nğŸ¤– _OrigenLab Blog Generator v7.0_",
        "additionalFields": {"parse_mode": "Markdown", "disable_web_page_preview": false}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [3160, 280],
      "id": "telegram-notify",
      "name": "Notificar Telegram",
      "credentials": {
        "telegramApi": {"id": "YOUR_TELEGRAM_CREDENTIAL_ID", "name": "Telegram Bot"}
      }
    },
    {
      "parameters": {
        "jsCode": "const error = $input.first().json;\n\nreturn {\n  error: true,\n  mensaje: 'Error en generaciÃ³n de artÃ­culo',\n  detalle: error.error || 'Error desconocido',\n  rawResponse: error.rawResponse || 'Sin respuesta'\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 500],
      "id": "manejar-error",
      "name": "Manejar Error"
    },
    {
      "parameters": {
        "chatId": "={{$env.TELEGRAM_CHAT_ID || '772938445'}}",
        "text": "=âŒ *ERROR EN GENERACIÃ“N*\n\n{{ $json.mensaje }}\n\nğŸ“‹ *Detalle:* {{ $json.detalle }}\n\nğŸ” *Respuesta:* {{ $json.rawResponse }}",
        "additionalFields": {"parse_mode": "Markdown"}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [2060, 500],
      "id": "telegram-error",
      "name": "Notificar Error",
      "credentials": {
        "telegramApi": {"id": "YOUR_TELEGRAM_CREDENTIAL_ID", "name": "Telegram Bot"}
      }
    }
  ],
  "connections": {
    "Cada 2 DÃ­as 9AM": {"main": [[{"node": "Seleccionar Empresa y Contexto", "type": "main", "index": 0}]]},
    "EjecuciÃ³n Manual": {"main": [[{"node": "Seleccionar Empresa y Contexto", "type": "main", "index": 0}]]},
    "Seleccionar Empresa y Contexto": {"main": [[{"node": "Construir Prompt SEO Profesional", "type": "main", "index": 0}]]},
    "Construir Prompt SEO Profesional": {"main": [[{"node": "OpenAI GPT-4o (8K tokens)", "type": "main", "index": 0}]]},
    "OpenAI GPT-4o (8K tokens)": {"main": [[{"node": "Validar y Procesar Respuesta", "type": "main", "index": 0}]]},
    "Validar y Procesar Respuesta": {"main": [[{"node": "Â¿Contenido VÃ¡lido?", "type": "main", "index": 0}]]},
    "Â¿Contenido VÃ¡lido?": {"main": [[{"node": "Construir HTML SEO Completo", "type": "main", "index": 0}], [{"node": "Manejar Error", "type": "main", "index": 0}]]},
    "Construir HTML SEO Completo": {"main": [[{"node": "GitHub - Subir ArtÃ­culo", "type": "main", "index": 0}]]},
    "GitHub - Subir ArtÃ­culo": {"main": [[{"node": "GitHub - Obtener JSON", "type": "main", "index": 0}]]},
    "GitHub - Obtener JSON": {"main": [[{"node": "Actualizar JSON ArtÃ­culos", "type": "main", "index": 0}]]},
    "Actualizar JSON ArtÃ­culos": {"main": [[{"node": "GitHub - Actualizar JSON", "type": "main", "index": 0}]]},
    "GitHub - Actualizar JSON": {"main": [[{"node": "Generar Resumen", "type": "main", "index": 0}]]},
    "Generar Resumen": {"main": [[{"node": "Notificar Telegram", "type": "main", "index": 0}]]},
    "Manejar Error": {"main": [[{"node": "Notificar Error", "type": "main", "index": 0}]]}
  },
  "settings": {"executionOrder": "v1"},
  "staticData": null,
  "tags": [{"name": "blog"}, {"name": "seo"}, {"name": "seguridad-privada"}, {"name": "profesional"}],
  "triggerCount": 2,
  "updatedAt": "2025-01-27T00:00:00.000Z",
  "versionId": "7.0"
}

{
  "name": "OrigenLab - Blog Generator v8.1 (Fix ImÃ¡genes)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "days",
              "triggerAtHour": 9,
              "daysInterval": 2
            }
          ]
        }
      },
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [480, 300],
      "id": "schedule-trigger",
      "name": "Cada 2 DÃ­as 9AM"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [480, 480],
      "id": "manual-trigger",
      "name": "EjecuciÃ³n Manual"
    },
    {
      "parameters": {
        "jsCode": "// =====================================================\n// ORIGENLAB BLOG GENERATOR v8.1 - FIX IMÃGENES\n// Sin imÃ¡genes en contenido HTML - Solo imagen principal\n// =====================================================\n\nconst empresas = [\n  {\n    id: 'origins-private-security',\n    nombre: 'ORIGINS Private Security',\n    slugPerfil: 'seguridad-condominios-cdmx',\n    especialidad: 'Seguridad para Condominios',\n    ubicacion: 'CDMX y Estado de MÃ©xico',\n    direccion: 'Basiliso Romo Anguiano No 22 int 3, Col Industrial, CDMX 07800',\n    telefono: '+52-55-3025-5580',\n    email: 'josecruz@originsecurity.mx',\n    website: 'seguridad-privada.com.mx',\n    experiencia: '15+ aÃ±os',\n    rating: 4.9,\n    resenas: 245,\n    servicios: [\n      'Guardias certificados SSC',\n      'Central de monitoreo propio 24/7',\n      'TecnologÃ­a GPS en tiempo real',\n      'Respuesta en menos de 3 minutos',\n      'Control de accesos vehicular y peatonal',\n      'Rondines con reporte fotogrÃ¡fico',\n      'Escoltas ejecutivos'\n    ],\n    diferenciadores: [\n      'Ãšnica empresa con respuesta garantizada en 3 minutos',\n      'Guardias 100% certificados por SSC',\n      'Central de monitoreo propia (no tercerizada)',\n      'TecnologÃ­a GPS para rastreo de rondines'\n    ],\n    certificaciones: ['SSC', 'NOM-001', 'ISO 9001'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico', 'QuerÃ©taro'],\n    clientes: '500+ condominios protegidos'\n  },\n  {\n    id: 'seprico',\n    nombre: 'SEPRICO',\n    slugPerfil: 'seguridad-condominios-seprico',\n    especialidad: 'Seguridad Especializada para Condominios',\n    ubicacion: 'CDMX - Polanco',\n    direccion: 'Enrique Ibsen 40, Polanco III Secc, Miguel Hidalgo, CDMX 11550',\n    telefono: '+52-56-3628-2480',\n    email: 'direccion@seprico.mx',\n    website: 'seguridadprivadacondominios.com',\n    experiencia: '10+ aÃ±os',\n    rating: 4.8,\n    resenas: 428,\n    servicios: [\n      'Vigilancia 24/7 con guardias capacitados',\n      'Control de accesos biomÃ©trico',\n      'Monitoreo electrÃ³nico avanzado',\n      'CÃ¡maras de vigilancia HD',\n      'Sistemas de alarma perimetral',\n      'GestiÃ³n de visitantes digital',\n      'Rondines programados'\n    ],\n    diferenciadores: [\n      'EvaluaciÃ³n de seguridad gratuita',\n      'MÃ¡s de 200 condominios bajo protecciÃ³n',\n      'Control biomÃ©trico de Ãºltima generaciÃ³n',\n      'UbicaciÃ³n estratÃ©gica en Polanco'\n    ],\n    certificaciones: ['SSC', 'CONOCER'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico'],\n    clientes: '200+ condominios en Polanco y zonas premium'\n  },\n  {\n    id: 'seguridad-eventos-profesional',\n    nombre: 'Seguridad para Eventos',\n    slugPerfil: 'seguridad-eventos-profesional',\n    especialidad: 'Seguridad Integral para Eventos Masivos',\n    ubicacion: 'CDMX - Santa Fe',\n    direccion: 'Av. Javier Barros Sierra 540-Torre 1, Piso 3, Santa Fe, CDMX 01210',\n    telefono: '+52-55-1234-5600',\n    email: 'contacto@seguridadeventos.com',\n    website: 'seguridadeventos.com',\n    experiencia: '15+ aÃ±os',\n    rating: 4.9,\n    resenas: 615,\n    servicios: [\n      'Control de acceso para eventos',\n      'Vigilancia perimetral 24/7',\n      'Seguridad VIP y escoltas',\n      'GestiÃ³n de multitudes',\n      'CoordinaciÃ³n con autoridades',\n      'Planes de evacuaciÃ³n',\n      'Personal femenino especializado'\n    ],\n    diferenciadores: [\n      'MÃ¡s de 5,000 eventos realizados',\n      'Especialistas en conciertos y festivales',\n      'CoordinaciÃ³n directa con ProtecciÃ³n Civil',\n      'Equipo de respuesta rÃ¡pida'\n    ],\n    certificaciones: ['SSC', 'ProtecciÃ³n Civil', 'NOM-002'],\n    cobertura: ['Nacional'],\n    clientes: 'Auditorio Nacional, Foro Sol, Centro Banamex'\n  },\n  {\n    id: 'seguridadprivadamx',\n    nombre: 'SeguridadPrivadaMX',\n    slugPerfil: 'seguridad-condominios-inteligente',\n    especialidad: 'Seguridad Inteligente con TecnologÃ­a Propia',\n    ubicacion: 'CDMX - Benito JuÃ¡rez',\n    direccion: 'Av. Insurgentes Sur 1602, Piso 4, Col. CrÃ©dito Constructor, CDMX 03900',\n    telefono: '+52-55-1234-5678',\n    email: 'contacto@seguridadprivadamx.com',\n    website: 'seguridadprivadamx.com',\n    experiencia: '12+ aÃ±os',\n    rating: 4.9,\n    resenas: 312,\n    servicios: [\n      'App mÃ³vil para residentes',\n      'CÃ¡maras HD con acceso remoto',\n      'Control de accesos inteligente',\n      'Guardias 100% certificados SSC',\n      'Reportes en tiempo real',\n      'AutorizaciÃ³n de visitas digital',\n      'Precios transparentes sin costos ocultos'\n    ],\n    diferenciadores: [\n      'Primera empresa con tecnologÃ­a 100% propia',\n      'App mÃ³vil para control desde el celular',\n      'CotizaciÃ³n en menos de 4 horas',\n      'Precios transparentes publicados'\n    ],\n    certificaciones: ['SSC', 'ISO 27001', 'CONOCER'],\n    cobertura: ['CDMX', 'Estado de MÃ©xico', 'Guadalajara'],\n    clientes: '150+ condominios con tecnologÃ­a integrada'\n  }\n];\n\nconst tiposArticulo = [\n  {\n    tipo: 'analisis-ejecutivo',\n    titulo: 'AnÃ¡lisis Ejecutivo',\n    descripcion: 'AnÃ¡lisis profundo y estratÃ©gico de la empresa para tomadores de decisiones',\n    enfoque: 'estratÃ©gico'\n  },\n  {\n    tipo: 'guia-profesional',\n    titulo: 'GuÃ­a Profesional',\n    descripcion: 'GuÃ­a detallada de servicios con enfoque corporativo y comercial',\n    enfoque: 'informativo-comercial'\n  },\n  {\n    tipo: 'evaluacion-integral',\n    titulo: 'EvaluaciÃ³n Integral',\n    descripcion: 'EvaluaciÃ³n completa de capacidades, ventajas y propuesta de valor',\n    enfoque: 'evaluativo'\n  }\n];\n\n// LISTA COMPLETA DE 61 IMÃGENES REALES EN EL SERVIDOR\nconst TODAS_LAS_IMAGENES = [\n  'caseta-moderna-control-acceso.webp',\n  'central-alarmas-respuesta-inmediata.webp',\n  'central-monitoreo-seguridad-remota.webp',\n  'centro-comando-videovigilancia-gps.webp',\n  'centro-monitoreo-cctv-camaras.webp',\n  'control-acceso-hospital-detector.webp',\n  'control-acceso-parque-industrial.webp',\n  'control-acceso-residencial-caseta.webp',\n  'control-acceso-vehicular-registro.webp',\n  'control-vehicular-caseta-vigilancia.webp',\n  'custodia-valores-traslado-efectivo.webp',\n  'equipo-respuesta-emergencias-hospital.webp',\n  'equipo-seguridad-gala-convenciones.webp',\n  'equipo-seguridad-hospitalaria-medica.webp',\n  'equipo-seguridad-privada-uniforme.webp',\n  'equipo-seguridad-zona-carga-industrial.webp',\n  'escolta-ejecutivo-proteccion-vip.webp',\n  'escoltas-ejecutivos-empresariales.webp',\n  'escoltas-vehiculo-blindado-cdmx.webp',\n  'guardaespaldas-proteccion-personal.webp',\n  'guardia-acceso-condominio-pluma.webp',\n  'guardia-caseta-entrada-residencial.webp',\n  'guardia-hospital-clinica-salud.webp',\n  'guardia-intramuros-residencial.webp',\n  'guardia-ronda-nocturna-patrulla.webp',\n  'guardia-seguridad-torre-corporativa.webp',\n  'guardia-tienda-retail-comercio.webp',\n  'guardias-chaleco-tactico-empresarial.webp',\n  'guardias-seguridad-corporativa-edificio.webp',\n  'monitoreo-camaras-vigilancia-24hrs.webp',\n  'monitoreo-gps-rastreo-vehicular.webp',\n  'operador-monitoreo-alarmas-central.webp',\n  'operador-videovigilancia-monitores.webp',\n  'patrulla-nocturna-fraccionamiento.webp',\n  'personal-femenino-seguridad-eventos.webp',\n  'proteccion-ejecutivos-traslados.webp',\n  'rondin-nocturno-residencial-casa.webp',\n  'seguridad-aduana-frontera-carga.webp',\n  'seguridad-almacen-logistica-bodega.webp',\n  'seguridad-bancaria-blindada.webp',\n  'seguridad-congresos-exposiciones.webp',\n  'seguridad-corporativa-lobby-recepcion.webp',\n  'seguridad-ejecutiva-guardaespaldas.webp',\n  'seguridad-estacionamiento-comercial.webp',\n  'seguridad-eventos-alfombra-roja.webp',\n  'seguridad-hospitalaria-emergencias.webp',\n  'seguridad-industrial-bodega-almacen.webp',\n  'seguridad-mall-prevencion-perdidas.webp',\n  'seguridad-parque-industrial-logistica.webp',\n  'seguridad-perimetral-fraccionamiento.webp',\n  'staff-seguridad-evento-corporativo.webp',\n  'vigilancia-acceso-controlado-pluma.webp',\n  'vigilancia-banco-instituciones.webp',\n  'vigilancia-centro-comercial-plaza.webp',\n  'vigilancia-entrada-edificio-corporativo.webp',\n  'vigilancia-eventos-sociales-gala.webp',\n  'vigilancia-nave-industrial-fabrica.webp',\n  'vigilancia-perimetral-noche.webp',\n  'vigilante-edificio-oficinas.webp',\n  'vigilante-fraccionamiento-residencial.webp',\n  'vigilante-nocturno-linterna-patrol.webp'\n];\n\nconst imagenesPorTema = {\n  condominios: [\n    'control-acceso-residencial-caseta.webp',\n    'guardia-caseta-entrada-residencial.webp',\n    'vigilante-fraccionamiento-residencial.webp',\n    'guardia-intramuros-residencial.webp',\n    'seguridad-perimetral-fraccionamiento.webp',\n    'caseta-moderna-control-acceso.webp',\n    'guardia-acceso-condominio-pluma.webp',\n    'vigilancia-acceso-controlado-pluma.webp',\n    'patrulla-nocturna-fraccionamiento.webp',\n    'rondin-nocturno-residencial-casa.webp'\n  ],\n  tecnologia: [\n    'monitoreo-camaras-vigilancia-24hrs.webp',\n    'central-monitoreo-seguridad-remota.webp',\n    'operador-monitoreo-alarmas-central.webp',\n    'operador-videovigilancia-monitores.webp',\n    'centro-comando-videovigilancia-gps.webp',\n    'centro-monitoreo-cctv-camaras.webp',\n    'central-alarmas-respuesta-inmediata.webp',\n    'monitoreo-gps-rastreo-vehicular.webp'\n  ],\n  eventos: [\n    'seguridad-eventos-alfombra-roja.webp',\n    'staff-seguridad-evento-corporativo.webp',\n    'vigilancia-eventos-sociales-gala.webp',\n    'equipo-seguridad-gala-convenciones.webp',\n    'personal-femenino-seguridad-eventos.webp',\n    'seguridad-congresos-exposiciones.webp'\n  ],\n  corporativo: [\n    'seguridad-corporativa-lobby-recepcion.webp',\n    'vigilancia-entrada-edificio-corporativo.webp',\n    'guardia-seguridad-torre-corporativa.webp',\n    'guardias-seguridad-corporativa-edificio.webp',\n    'vigilante-edificio-oficinas.webp',\n    'guardias-chaleco-tactico-empresarial.webp'\n  ]\n};\n\nconst empresa = empresas[Math.floor(Math.random() * empresas.length)];\nconst tipoArticulo = tiposArticulo[Math.floor(Math.random() * tiposArticulo.length)];\n\nlet temaImagenes = 'condominios';\nif (empresa.especialidad.includes('Eventos')) temaImagenes = 'eventos';\nelse if (empresa.especialidad.includes('Inteligente')) temaImagenes = 'tecnologia';\n\nconst imagenesDisponibles = imagenesPorTema[temaImagenes];\nconst imagenPrincipal = imagenesDisponibles[Math.floor(Math.random() * imagenesDisponibles.length)];\n\nconst generarSlugSEO = (empresa, tipo) => {\n  const palabras = [\n    empresa.nombre.toLowerCase().replace(/[^a-z0-9\\s]/g, '').replace(/\\s+/g, '-'),\n    tipo.tipo,\n    'seguridad-privada-mexico'\n  ];\n  return palabras.join('-').substring(0, 80);\n};\n\nreturn {\n  empresa: empresa,\n  tipoArticulo: tipoArticulo,\n  slugArticulo: generarSlugSEO(empresa, tipoArticulo),\n  imagenPrincipal: imagenPrincipal,\n  temaImagenes: temaImagenes\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [720, 380],
      "id": "selector-empresa",
      "name": "Seleccionar Empresa"
    },
    {
      "parameters": {
        "jsCode": "const d = $input.first().json;\nconst e = d.empresa;\nconst t = d.tipoArticulo;\n\nconst prompt = `Eres un redactor corporativo de Ã©lite especializado en contenido B2B para el sector de seguridad privada en MÃ©xico.\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    PERFIL DE LA EMPRESA\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ–¸ RazÃ³n Social: ${e.nombre}\nâ–¸ EspecializaciÃ³n: ${e.especialidad}\nâ–¸ UbicaciÃ³n Corporativa: ${e.ubicacion}\nâ–¸ DirecciÃ³n: ${e.direccion}\nâ–¸ Trayectoria: ${e.experiencia} en el mercado\nâ–¸ CalificaciÃ³n: ${e.rating}/5.0 (${e.resenas} evaluaciones verificadas)\nâ–¸ Portal Web: ${e.website}\nâ–¸ LÃ­nea Directa: ${e.telefono}\n\nâ–¸ Portafolio de Servicios:\n${e.servicios.map((s, i) => '   ' + (i + 1) + '. ' + s).join('\\n')}\n\nâ–¸ Propuesta de Valor Diferenciada:\n${e.diferenciadores.map(d => '   â€¢ ' + d).join('\\n')}\n\nâ–¸ Acreditaciones: ${e.certificaciones.join(' | ')}\nâ–¸ Alcance GeogrÃ¡fico: ${e.cobertura.join(', ')}\nâ–¸ Cartera de Clientes: ${e.clientes}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    TIPO DE CONTENIDO\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ–¸ Formato: ${t.titulo}\nâ–¸ Objetivo: ${t.descripcion}\nâ–¸ Enfoque: ${t.enfoque}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n              DIRECTRICES EDITORIALES OBLIGATORIAS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘  ğŸš« PROHIBIDO INCLUIR IMÃGENES EN EL CONTENIDO              â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘  â€¢ NO incluir NINGUNA etiqueta <img> en el contenido        â•‘\nâ•‘  â€¢ NO incluir NINGUNA etiqueta <figure> en el contenido     â•‘\nâ•‘  â€¢ La imagen principal se agrega automÃ¡ticamente            â•‘\nâ•‘  â€¢ El contenido debe ser SOLO texto HTML estructurado       â•‘\nâ•‘  â€¢ NUNCA usar src=, <img, <figure, o referencias a .webp    â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘  1. CONTENIDO 100% ATEMPORAL (EVERGREEN)                     â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘  â€¢ PROHIBIDO: aÃ±os, fechas, \"actualmente\", \"hoy en dÃ­a\"      â•‘\nâ•‘  â€¢ El contenido debe ser vÃ¡lido permanentemente              â•‘\nâ•‘  â€¢ Usar expresiones atemporales                              â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘  2. REDACCIÃ“N EJECUTIVA PREMIUM                              â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘  â€¢ Tono: Corporativo, estratÃ©gico, autoritativo              â•‘\nâ•‘  â€¢ Vocabulario: Profesional, tÃ©cnico pero accesible          â•‘\nâ•‘  â€¢ ExtensiÃ³n: MÃ­nimo 2,500 palabras                          â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\nâ•‘  3. OPTIMIZACIÃ“N SEO                                         â•‘\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£\nâ•‘  â€¢ Keywords: seguridad privada MÃ©xico, vigilancia CDMX       â•‘\nâ•‘  â€¢ Meta description: 155-160 caracteres                      â•‘\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    ESTRUCTURA HTML (SIN IMÃGENES)\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n<p class=\"article-lead\">PÃ¡rrafo de apertura ejecutivo (150-200 palabras)</p>\n\n<section class=\"article-section\" id=\"panorama-sector\">\n  <h2>Panorama del Sector de Seguridad Privada en MÃ©xico</h2>\n  <p>Contenido extenso...</p>\n  <h3>EvoluciÃ³n del Mercado</h3>\n  <p>...</p>\n  <h3>Demanda Corporativa y Residencial</h3>\n  <p>...</p>\n</section>\n\n<section class=\"article-section\" id=\"perfil-corporativo\">\n  <h2>Perfil Corporativo: ${e.nombre}</h2>\n  <p>PresentaciÃ³n ejecutiva...</p>\n  <h3>Trayectoria y Solidez Empresarial</h3>\n  <p>...</p>\n  <h3>FilosofÃ­a de Servicio</h3>\n  <p>...</p>\n</section>\n\n<section class=\"article-section\" id=\"portafolio-servicios\">\n  <h2>Portafolio Integral de Servicios</h2>\n  <p>DescripciÃ³n de servicios...</p>\n  <h3>Vigilancia FÃ­sica</h3>\n  <p>...</p>\n  <h3>Soluciones TecnolÃ³gicas</h3>\n  <p>...</p>\n  \n  <div class=\"article-tip\">\n    <h4>RecomendaciÃ³n Ejecutiva</h4>\n    <p>Consejo estratÃ©gico...</p>\n  </div>\n</section>\n\n<section class=\"article-section\" id=\"diferenciadores\">\n  <h2>Factores Diferenciadores</h2>\n  <p>AnÃ¡lisis de ventajas...</p>\n  \n  <div class=\"article-highlight\">\n    <h4>Indicador Clave</h4>\n    <p>Dato relevante...</p>\n  </div>\n</section>\n\n<section class=\"article-section\" id=\"metodologia\">\n  <h2>MetodologÃ­a de ImplementaciÃ³n</h2>\n  <h3>Fase de DiagnÃ³stico</h3>\n  <p>...</p>\n  <h3>DiseÃ±o de SoluciÃ³n</h3>\n  <p>...</p>\n</section>\n\n<section class=\"article-section\" id=\"casos-referencia\">\n  <h2>Casos de Referencia</h2>\n  \n  <blockquote class=\"article-quote\">\n    <p>\"Testimonio de cliente...\"</p>\n    <cite>â€” Nombre, Cargo, Empresa</cite>\n  </blockquote>\n</section>\n\n<section class=\"article-section\" id=\"cobertura\">\n  <h2>Alcance GeogrÃ¡fico</h2>\n  <p>Detalle de cobertura...</p>\n</section>\n\n<section class=\"article-section\" id=\"proceso-contratacion\">\n  <h2>Proceso de ContrataciÃ³n</h2>\n  <h3>Solicitud de CotizaciÃ³n</h3>\n  <p>...</p>\n</section>\n\n<section class=\"article-section\" id=\"preguntas-frecuentes\">\n  <h2>Preguntas Frecuentes</h2>\n  \n  <div class=\"faq-accordion\">\n    <div class=\"faq-item\">\n      <button class=\"faq-question\" onclick=\"this.parentElement.classList.toggle('active')\">\n        <span>Â¿Pregunta 1?</span>\n        <svg class=\"faq-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M6 9l6 6 6-6\"/></svg>\n      </button>\n      <div class=\"faq-answer\">\n        <p>Respuesta...</p>\n      </div>\n    </div>\n    <!-- Repetir para 6 FAQs -->\n  </div>\n</section>\n\n<section class=\"article-section\" id=\"conclusion\">\n  <h2>ConclusiÃ³n Ejecutiva</h2>\n  <p>SÃ­ntesis...</p>\n  <p>CTA: <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"article-link\">${e.nombre}</a></p>\n</section>\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    ELEMENTOS OBLIGATORIOS\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ“ 2x article-tip\nâœ“ 2x article-highlight  \nâœ“ 1x article-quote\nâœ“ 6x FAQ accordion\nâœ“ Link al perfil\nâœ“ SIN NINGUNA etiqueta <img> o <figure>\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    RESPUESTA JSON\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n{\n  \"titulo\": \"TÃ­tulo SEO (mÃ¡x 60 chars, SIN AÃ‘OS)\",\n  \"tituloCorto\": \"Para breadcrumb (mÃ¡x 25 chars)\",\n  \"metaDescripcion\": \"155-160 chars con keyword\",\n  \"keywords\": \"seguridad privada MÃ©xico, empresas seguridad CDMX, vigilancia profesional\",\n  \"tiempoLectura\": 18,\n  \"subtitulo\": \"SubtÃ­tulo ejecutivo\",\n  \"imagenAlt\": \"DescripciÃ³n SEO de imagen\",\n  \"tocItems\": [\n    {\"id\": \"panorama-sector\", \"titulo\": \"Panorama\"},\n    {\"id\": \"perfil-corporativo\", \"titulo\": \"Perfil\"},\n    {\"id\": \"portafolio-servicios\", \"titulo\": \"Servicios\"},\n    {\"id\": \"diferenciadores\", \"titulo\": \"Diferenciadores\"},\n    {\"id\": \"metodologia\", \"titulo\": \"MetodologÃ­a\"},\n    {\"id\": \"casos-referencia\", \"titulo\": \"Casos\"},\n    {\"id\": \"cobertura\", \"titulo\": \"Cobertura\"},\n    {\"id\": \"proceso-contratacion\", \"titulo\": \"ContrataciÃ³n\"},\n    {\"id\": \"preguntas-frecuentes\", \"titulo\": \"FAQ\"},\n    {\"id\": \"conclusion\", \"titulo\": \"ConclusiÃ³n\"}\n  ],\n  \"faqs\": [\n    {\"pregunta\": \"Â¿Pregunta?\", \"respuesta\": \"Respuesta\"}\n  ],\n  \"contenido\": \"<p class='article-lead'>...</p>... SIN NINGÃšN <img> o <figure>\"\n}\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    VALIDACIONES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâ–¡ Contenido atemporal (sin fechas)\nâ–¡ MÃ­nimo 2,500 palabras\nâ–¡ 6 FAQs en accordion\nâ–¡ ğŸš« CERO etiquetas <img> o <figure> en contenido`;\n\nreturn {\n  prompt: prompt,\n  ...d\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [940, 380],
      "id": "constructor-prompt",
      "name": "Construir Prompt v8.1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/chat/completions",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [{"name": "Content-Type", "value": "application/json"}]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"model\": \"gpt-4o\",\n  \"messages\": [\n    {\n      \"role\": \"system\",\n      \"content\": \"Eres un Director de Contenido Corporativo experto en seguridad privada en MÃ©xico. Tu escritura es estratÃ©gica, autoritativa y profesional. REGLAS ABSOLUTAS: 1) NUNCA incluir etiquetas <img> o <figure> en el contenido. 2) NUNCA usar fechas ni aÃ±os. 3) Siempre responder en JSON vÃ¡lido.\"\n    },\n    {\n      \"role\": \"user\",\n      \"content\": {{ JSON.stringify($json.prompt) }}\n    }\n  ],\n  \"temperature\": 0.6,\n  \"max_tokens\": 10000,\n  \"response_format\": {\"type\": \"json_object\"}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [1160, 380],
      "id": "openai-request",
      "name": "OpenAI GPT-4o",
      "credentials": {
        "openAiApi": {"id": "YOUR_OPENAI_CREDENTIAL_ID", "name": "OpenAI API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const response = $input.first().json;\nconst datos = $('Construir Prompt v8.1').first().json;\n\ntry {\n  const articulo = JSON.parse(response.choices[0].message.content);\n  \n  if (!articulo.titulo || !articulo.contenido || !articulo.metaDescripcion) {\n    throw new Error('Campos requeridos faltantes');\n  }\n\n  if (articulo.contenido.length < 2000) {\n    throw new Error('Contenido insuficiente: ' + articulo.contenido.length + ' chars');\n  }\n\n  // LIMPIAR cualquier imagen que GPT haya incluido\n  let contenidoLimpio = articulo.contenido\n    .replace(/<img[^>]*>/gi, '')\n    .replace(/<figure[^>]*>.*?<\\/figure>/gi, '')\n    .replace(/<picture[^>]*>.*?<\\/picture>/gi, '');\n\n  // Validar aÃ±os\n  const tieneAnos = /\\b(202[0-9]|201[0-9])\\b/.test(contenidoLimpio);\n  if (tieneAnos) {\n    console.log('Advertencia: Contenido con aÃ±os');\n  }\n\n  return {\n    valido: true,\n    titulo: articulo.titulo.substring(0, 60),\n    tituloCorto: articulo.tituloCorto || articulo.titulo.substring(0, 25),\n    metaDescripcion: articulo.metaDescripcion.substring(0, 160),\n    keywords: articulo.keywords,\n    tiempoLectura: articulo.tiempoLectura || 15,\n    subtitulo: articulo.subtitulo,\n    imagenAlt: articulo.imagenAlt || datos.empresa.nombre + ' - Seguridad Privada MÃ©xico',\n    tocItems: articulo.tocItems || [],\n    faqs: articulo.faqs || [],\n    contenidoHTML: contenidoLimpio,\n    contenidoLength: contenidoLimpio.length,\n    slugArticulo: datos.slugArticulo,\n    empresa: datos.empresa,\n    tipoArticulo: datos.tipoArticulo,\n    imagenPrincipal: datos.imagenPrincipal\n  };\n} catch (e) {\n  return {\n    valido: false,\n    error: e.message,\n    rawResponse: response.choices?.[0]?.message?.content?.substring(0, 500)\n  };\n}"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1380, 380],
      "id": "procesar-respuesta",
      "name": "Validar y Limpiar"
    },
    {
      "parameters": {
        "conditions": {
          "boolean": [{"value1": "={{ $json.valido }}", "value2": true}]
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1600, 380],
      "id": "verificar-valido",
      "name": "Â¿VÃ¡lido?"
    },
    {
      "parameters": {
        "jsCode": "const a = $input.first().json;\nconst e = a.empresa;\n\nconst tocHTML = a.tocItems.map(item => \n  `<li><a href=\"#${item.id}\">${item.titulo}</a></li>`\n).join('\\n              ');\n\nconst faqSchemaItems = a.faqs.map(faq => `{\n        \"@type\": \"Question\",\n        \"name\": \"${faq.pregunta.replace(/\"/g, '\\\\\"')}\",\n        \"acceptedAnswer\": {\n          \"@type\": \"Answer\",\n          \"text\": \"${faq.respuesta.replace(/\"/g, '\\\\\"').substring(0, 300)}\"\n        }\n      }`).join(',\\n      ');\n\nconst imgPath = `img/seguridad-privada/${a.imagenPrincipal}`;\n\nconst html = `<!DOCTYPE html>\n<html lang=\"es-MX\">\n\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n  <title>${a.titulo} | OrigenLab</title>\n  <meta name=\"description\" content=\"${a.metaDescripcion}\">\n  <meta name=\"keywords\" content=\"${a.keywords}\">\n  <meta name=\"author\" content=\"OrigenLab\">\n  <meta name=\"robots\" content=\"index, follow, max-snippet:-1, max-image-preview:large\">\n\n  <meta property=\"og:type\" content=\"article\">\n  <meta property=\"og:url\" content=\"https://origenlab.com/blog/${a.slugArticulo}.html\">\n  <meta property=\"og:title\" content=\"${a.titulo}\">\n  <meta property=\"og:description\" content=\"${a.metaDescripcion}\">\n  <meta property=\"og:image\" content=\"https://origenlab.com/${imgPath}\">\n  <meta property=\"og:locale\" content=\"es_MX\">\n\n  <meta name=\"twitter:card\" content=\"summary_large_image\">\n  <meta name=\"twitter:title\" content=\"${a.titulo}\">\n  <meta name=\"twitter:description\" content=\"${a.metaDescripcion}\">\n  <meta name=\"twitter:image\" content=\"https://origenlab.com/${imgPath}\">\n\n  <link rel=\"canonical\" href=\"https://origenlab.com/blog/${a.slugArticulo}.html\">\n\n  <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n  <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n  <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap\" rel=\"stylesheet\">\n\n  <link rel=\"stylesheet\" href=\"../css/minimal-global.css\">\n  <link rel=\"stylesheet\" href=\"../css/style.css\">\n  <link rel=\"stylesheet\" href=\"../css/cta-global.css\">\n  <link rel=\"stylesheet\" href=\"assets/css/blog.css\">\n  <link rel=\"stylesheet\" href=\"assets/css/article.css\">\n\n  <style>\n    .faq-accordion { margin: 2rem 0; }\n    .faq-item { border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; margin-bottom: 1rem; overflow: hidden; background: rgba(255,255,255,0.02); }\n    .faq-question { width: 100%; padding: 1.25rem 1.5rem; background: transparent; border: none; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem; font-weight: 600; color: #fff; text-align: left; transition: background 0.3s; }\n    .faq-question:hover { background: rgba(255,255,255,0.05); }\n    .faq-question span { flex: 1; padding-right: 1rem; }\n    .faq-icon { width: 24px; height: 24px; transition: transform 0.3s; flex-shrink: 0; }\n    .faq-item.active .faq-icon { transform: rotate(180deg); }\n    .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease, padding 0.3s ease; }\n    .faq-item.active .faq-answer { max-height: 500px; padding: 0 1.5rem 1.5rem; }\n    .faq-answer p { color: rgba(255,255,255,0.8); line-height: 1.7; margin: 0; }\n  </style>\n\n  <script type=\"application/ld+json\">\n  {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"Article\",\n    \"headline\": \"${a.titulo}\",\n    \"description\": \"${a.metaDescripcion}\",\n    \"image\": \"https://origenlab.com/${imgPath}\",\n    \"author\": {\"@type\": \"Organization\", \"name\": \"OrigenLab\"},\n    \"publisher\": {\"@type\": \"Organization\", \"name\": \"OrigenLab\", \"logo\": {\"@type\": \"ImageObject\", \"url\": \"https://origenlab.com/img/origenlab.webp\"}},\n    \"inLanguage\": \"es-MX\"\n  }\n  </script>\n\n  <script type=\"application/ld+json\">\n  {\n    \"@context\": \"https://schema.org\",\n    \"@type\": \"FAQPage\",\n    \"mainEntity\": [\n      ${faqSchemaItems}\n    ]\n  }\n  </script>\n</head>\n\n<body>\n\n  <header class=\"header\">\n    <div class=\"container\">\n      <div class=\"nav-wrapper\">\n        <a href=\"../index.html\" class=\"logo\">\n          <img src=\"../img/origenlab.webp\" alt=\"OrigenLab\" width=\"180\" height=\"40\">\n        </a>\n        <nav>\n          <a href=\"../categorias/categorias.html\" class=\"nav-link\">CategorÃ­as</a>\n          <a href=\"../blog.html\" class=\"nav-link active\">Blog</a>\n        </nav>\n      </div>\n    </div>\n  </header>\n\n  <div class=\"breadcrumbs-wrapper\">\n    <div class=\"container\">\n      <nav aria-label=\"Breadcrumb\" class=\"breadcrumbs\">\n        <ol>\n          <li><a href=\"../index.html\">Inicio</a></li>\n          <li><a href=\"../blog.html\">Blog</a></li>\n          <li><a href=\"../categorias/seguridad-privada.html\">Seguridad Privada</a></li>\n          <li aria-current=\"page\">${a.tituloCorto}</li>\n        </ol>\n      </nav>\n    </div>\n  </div>\n\n  <article class=\"article-container\">\n    <div class=\"container\" style=\"max-width: 1400px; padding: var(--space-xl) var(--space-md);\">\n\n      <header class=\"article-header\">\n        <div class=\"article-header-image\">\n          <figure class=\"article-featured-image\">\n            <img src=\"../${imgPath}\" alt=\"${a.imagenAlt}\" loading=\"eager\" width=\"800\" height=\"450\">\n          </figure>\n        </div>\n        <div class=\"article-header-content\">\n          <div class=\"article-category-badge\">\n            <a href=\"../categorias/seguridad-privada.html\">Seguridad Privada</a>\n          </div>\n          <h1 class=\"article-title\">${a.titulo}</h1>\n          <p class=\"article-subtitle\">${a.subtitulo}</p>\n          <div class=\"article-meta-info\">\n            <span class=\"article-reading-time\">â± ${a.tiempoLectura} min lectura</span>\n          </div>\n        </div>\n      </header>\n\n      <div class=\"article-layout\">\n\n        <div class=\"article-content\">\n\n          <nav class=\"article-toc\">\n            <h2>Contenido</h2>\n            <ol>\n              ${tocHTML}\n            </ol>\n          </nav>\n\n          ${a.contenidoHTML}\n\n          <div class=\"article-cta\">\n            <h3>Â¿Necesitas Seguridad Privada?</h3>\n            <p>Conoce a ${e.nombre} y otros proveedores verificados</p>\n            <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"btn-primary\">Ver Perfil</a>\n          </div>\n\n        </div>\n\n        <aside class=\"article-sidebar\">\n          <div class=\"sidebar-widget sidebar-empresa\">\n            <h3 class=\"sidebar-widget-title\">Empresa Destacada</h3>\n            <div class=\"empresa-card-mini\">\n              <h4>${e.nombre}</h4>\n              <div class=\"empresa-rating\">â­ ${e.rating}/5 (${e.resenas} reseÃ±as)</div>\n              <p>${e.especialidad}</p>\n              <a href=\"../categorias/seguridad-privada/${e.slugPerfil}.html\" class=\"btn-primary\" style=\"width: 100%; text-align: center;\">Ver Perfil</a>\n            </div>\n          </div>\n          <div class=\"sidebar-widget\">\n            <h3 class=\"sidebar-widget-title\">MÃ¡s Empresas</h3>\n            <a href=\"../categorias/seguridad-privada.html\" class=\"btn-secondary\" style=\"width: 100%; text-align: center;\">Ver Todas</a>\n          </div>\n        </aside>\n\n      </div>\n\n    </div>\n  </article>\n\n  <section class=\"cta-section\">\n    <div class=\"container\" style=\"max-width: 800px;\">\n      <h2>Â¿Buscas Seguridad Privada en MÃ©xico?</h2>\n      <p>Proveedores verificados con las mejores referencias</p>\n      <div class=\"cta-botones\">\n        <a href=\"../categorias/seguridad-privada.html\" class=\"btn-primary\">Ver Empresas</a>\n        <a href=\"../blog.html\" class=\"btn-secondary\">MÃ¡s ArtÃ­culos</a>\n      </div>\n    </div>\n  </section>\n\n  <footer class=\"footer\" role=\"contentinfo\">\n    <div class=\"container\">\n      <div class=\"footer-main\">\n        <div class=\"footer-column footer-brand\">\n          <div class=\"footer-logo\">\n            <a href=\"../index.html\">\n              <img src=\"../img/origenlab.webp\" alt=\"OrigenLab\" width=\"160\" height=\"36\" style=\"object-fit: contain; filter: brightness(0) invert(1);\">\n            </a>\n          </div>\n          <p class=\"footer-tagline\">Donde los Negocios Mexicanos se Conectan</p>\n        </div>\n        <div class=\"footer-column\"><h3 class=\"footer-column-title\">CategorÃ­as</h3><ul class=\"footer-links\"><li><a href=\"../categorias/eventos.html\">Eventos</a></li><li><a href=\"../categorias/seguridad-privada.html\">Seguridad</a></li></ul></div>\n        <div class=\"footer-column\"><h3 class=\"footer-column-title\">Empresa</h3><ul class=\"footer-links\"><li><a href=\"../blog.html\">Blog</a></li><li><a href=\"../index.html\">Inicio</a></li></ul></div>\n      </div>\n      <div class=\"footer-bottom\">\n        <p class=\"footer-copyright\">Â© OrigenLab. Todos los derechos reservados. Hecho con â™¥ en MÃ©xico.</p>\n      </div>\n    </div>\n  </footer>\n\n</body>\n</html>`;\n\nreturn {\n  htmlArticulo: html,\n  rutaArchivo: `blog/${a.slugArticulo}.html`,\n  titulo: a.titulo,\n  extractoBlog: a.metaDescripcion,\n  tiempoLectura: a.tiempoLectura,\n  slugArticulo: a.slugArticulo,\n  imagenPrincipal: a.imagenPrincipal,\n  empresaNombre: e.nombre,\n  empresaSlug: e.slugPerfil,\n  keywords: a.keywords,\n  contenidoLength: a.contenidoLength,\n  faqCount: a.faqs.length\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 280],
      "id": "construir-html",
      "name": "Construir HTML"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "create",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "={{ $json.rutaArchivo }}",
        "fileContent": "={{ $json.htmlArticulo }}",
        "commitMessage": "=feat(blog): ${$json.empresaNombre} - ${$json.titulo}",
        "additionalParameters": {"branch": "main"}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2060, 280],
      "id": "github-articulo",
      "name": "GitHub - Subir",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "get",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "blog/data/articulos.json"
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2280, 280],
      "id": "github-get-json",
      "name": "GitHub - Get JSON",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const articulo = $('Construir HTML').first().json;\nconst githubFile = $input.first().json;\n\nlet jsonData;\ntry {\n  const content = Buffer.from(githubFile.content.replace(/\\n/g, ''), 'base64').toString('utf-8');\n  jsonData = JSON.parse(content);\n} catch (e) {\n  jsonData = { version: '3.0', articulos: [] };\n}\n\nconst nuevoArticulo = {\n  id: articulo.slugArticulo,\n  titulo: articulo.titulo,\n  slug: articulo.slugArticulo,\n  categoria: 'seguridad-privada',\n  categoriaNombre: 'Seguridad Privada',\n  extracto: articulo.extractoBlog,\n  imagen: `img/seguridad-privada/${articulo.imagenPrincipal}`,\n  tiempoLectura: articulo.tiempoLectura,\n  destacado: false,\n  n8n: true,\n  version: '8.1',\n  empresa: articulo.empresaNombre,\n  empresaSlug: articulo.empresaSlug,\n  keywords: articulo.keywords,\n  contenidoLength: articulo.contenidoLength,\n  faqCount: articulo.faqCount\n};\n\nconst existeIndex = jsonData.articulos.findIndex(a => a.id === nuevoArticulo.id);\nif (existeIndex >= 0) {\n  jsonData.articulos[existeIndex] = nuevoArticulo;\n} else {\n  jsonData.articulos.unshift(nuevoArticulo);\n}\n\njsonData.version = '3.0';\n\nreturn {\n  jsonActualizado: JSON.stringify(jsonData, null, 2),\n  sha: githubFile.sha,\n  articulo: articulo,\n  nuevoArticulo: nuevoArticulo,\n  totalArticulos: jsonData.articulos.length\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2500, 280],
      "id": "actualizar-json",
      "name": "Actualizar JSON"
    },
    {
      "parameters": {
        "resource": "file",
        "operation": "edit",
        "owner": "Origenlab",
        "repository": "ORIGENLAB",
        "filePath": "blog/data/articulos.json",
        "fileContent": "={{ $json.jsonActualizado }}",
        "commitMessage": "=feat(blog): update articulos.json - ${$json.articulo.empresaNombre}",
        "additionalParameters": {"branch": "main", "sha": "={{ $json.sha }}"}
      },
      "type": "n8n-nodes-base.github",
      "typeVersion": 1,
      "position": [2720, 280],
      "id": "github-update-json",
      "name": "GitHub - Update JSON",
      "credentials": {
        "githubApi": {"id": "YOUR_GITHUB_CREDENTIAL_ID", "name": "GitHub API"}
      }
    },
    {
      "parameters": {
        "jsCode": "const datos = $('Actualizar JSON').first().json;\nconst a = datos.articulo;\n\nreturn {\n  exito: true,\n  empresa: a.empresaNombre,\n  titulo: a.titulo,\n  urlArticulo: `https://origenlab.com/blog/${a.slugArticulo}.html`,\n  urlPerfil: `https://origenlab.com/categorias/seguridad-privada/${a.empresaSlug}.html`,\n  tiempoLectura: `${a.tiempoLectura} min`,\n  contenidoLength: `${a.contenidoLength} chars`,\n  faqCount: a.faqCount,\n  totalArticulos: datos.totalArticulos,\n  mensaje: 'âœ… ArtÃ­culo v8.1 publicado (sin imgs inventadas)'\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [2940, 280],
      "id": "resumen-final",
      "name": "Resumen"
    },
    {
      "parameters": {
        "chatId": "={{$env.TELEGRAM_CHAT_ID || '772938445'}}",
        "text": "=ğŸ¯ *ARTÃCULO v8.1*\n\nğŸ¢ *{{ $json.empresa }}*\nğŸ“ {{ $json.titulo }}\n\nğŸ“Š *MÃ©tricas:*\nâ€¢ Lectura: {{ $json.tiempoLectura }}\nâ€¢ Contenido: {{ $json.contenidoLength }}\nâ€¢ FAQs: {{ $json.faqCount }}\nâ€¢ Total: {{ $json.totalArticulos }} artÃ­culos\n\nğŸ”— {{ $json.urlArticulo }}\n\n{{ $json.mensaje }}",
        "additionalFields": {"parse_mode": "Markdown"}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [3160, 280],
      "id": "telegram-notify",
      "name": "Telegram",
      "credentials": {
        "telegramApi": {"id": "YOUR_TELEGRAM_CREDENTIAL_ID", "name": "Telegram Bot"}
      }
    },
    {
      "parameters": {
        "jsCode": "return {\n  error: true,\n  mensaje: 'Error en generaciÃ³n',\n  detalle: $input.first().json.error || 'Desconocido',\n  rawResponse: $input.first().json.rawResponse || ''\n};"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1840, 500],
      "id": "manejar-error",
      "name": "Error"
    },
    {
      "parameters": {
        "chatId": "={{$env.TELEGRAM_CHAT_ID || '772938445'}}",
        "text": "=âŒ *ERROR v8.1*\n\n{{ $json.detalle }}\n\n{{ $json.rawResponse }}",
        "additionalFields": {"parse_mode": "Markdown"}
      },
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [2060, 500],
      "id": "telegram-error",
      "name": "Error Telegram",
      "credentials": {
        "telegramApi": {"id": "YOUR_TELEGRAM_CREDENTIAL_ID", "name": "Telegram Bot"}
      }
    }
  ],
  "connections": {
    "Cada 2 DÃ­as 9AM": {"main": [[{"node": "Seleccionar Empresa", "type": "main", "index": 0}]]},
    "EjecuciÃ³n Manual": {"main": [[{"node": "Seleccionar Empresa", "type": "main", "index": 0}]]},
    "Seleccionar Empresa": {"main": [[{"node": "Construir Prompt v8.1", "type": "main", "index": 0}]]},
    "Construir Prompt v8.1": {"main": [[{"node": "OpenAI GPT-4o", "type": "main", "index": 0}]]},
    "OpenAI GPT-4o": {"main": [[{"node": "Validar y Limpiar", "type": "main", "index": 0}]]},
    "Validar y Limpiar": {"main": [[{"node": "Â¿VÃ¡lido?", "type": "main", "index": 0}]]},
    "Â¿VÃ¡lido?": {"main": [[{"node": "Construir HTML", "type": "main", "index": 0}], [{"node": "Error", "type": "main", "index": 0}]]},
    "Construir HTML": {"main": [[{"node": "GitHub - Subir", "type": "main", "index": 0}]]},
    "GitHub - Subir": {"main": [[{"node": "GitHub - Get JSON", "type": "main", "index": 0}]]},
    "GitHub - Get JSON": {"main": [[{"node": "Actualizar JSON", "type": "main", "index": 0}]]},
    "Actualizar JSON": {"main": [[{"node": "GitHub - Update JSON", "type": "main", "index": 0}]]},
    "GitHub - Update JSON": {"main": [[{"node": "Resumen", "type": "main", "index": 0}]]},
    "Resumen": {"main": [[{"node": "Telegram", "type": "main", "index": 0}]]},
    "Error": {"main": [[{"node": "Error Telegram", "type": "main", "index": 0}]]}
  },
  "settings": {"executionOrder": "v1"},
  "tags": [{"name": "blog"}, {"name": "v8.1"}, {"name": "fix-imagenes"}],
  "triggerCount": 2,
  "versionId": "8.1"
}
